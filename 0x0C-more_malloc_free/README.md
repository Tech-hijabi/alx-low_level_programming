Working with more malloc and free. Starting to use exit too
